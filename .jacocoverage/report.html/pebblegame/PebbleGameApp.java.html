<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>PebbleGameApp.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;PebbleGame&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">pebblegame</a> &gt; <span class="el_source">PebbleGameApp.java</span></div><h1>PebbleGameApp.java</h1><pre class="source lang-java linenums">package pebblegame;

/**
 *
 * @author liamvinson
 */

import java.util.Random;
import java.util.Scanner;
import java.io.IOException;
import java.util.ArrayList;
import java.io.PrintWriter;

<span class="nc" id="L14">public class PebbleGameApp {</span>
    static class Player extends Thread{
<span class="fc" id="L16">        public ArrayList&lt;Integer&gt; myHand = new ArrayList&lt;Integer&gt;();</span>
        MyBag lastBag;
        String playerName;
<span class="fc" id="L19">        public Player(String playerName){</span>
<span class="fc" id="L20">            this.playerName = playerName;</span>
<span class="fc" id="L21">        }</span>

        @Override
        public synchronized void run(){
            //Only done one time.
<span class="fc" id="L26">            myHand = drawPebble();</span>
            try{
<span class="fc" id="L28">                PrintWriter writer = new PrintWriter(playerName + &quot;.txt&quot;, &quot;UTF-8&quot;);</span>

<span class="fc bfc" id="L30" title="All 2 branches covered.">                while(!done){</span>
<span class="fc bfc" id="L31" title="All 2 branches covered.">                    if (is100() == true){</span>
<span class="fc" id="L32">                        System.out.println(playerName + &quot; Wins&quot;);</span>
<span class="fc" id="L33">                        done = true;</span>
                    } else {
<span class="fc" id="L35">                        int peb = discard();</span>
<span class="fc" id="L36">                        int pebD = draw();</span>

<span class="fc" id="L38">                        writer.println(playerName + &quot; has discarded a &quot; + peb + &quot; to &quot; + lastBag.corrospondingBag.bagName); </span>
<span class="fc" id="L39">                        writer.println(playerName + &quot; hand is &quot; + myHand);</span>

<span class="fc" id="L41">                        myHand.add(pebD);</span>
<span class="fc" id="L42">                        writer.println(playerName + &quot; has drawn a &quot; + pebD + &quot; from &quot; + lastBag.bagName); </span>
<span class="fc" id="L43">                        writer.println(playerName + &quot; hand is &quot; + myHand);</span>
                    }
<span class="fc" id="L45">                    Thread.yield();</span>
                }
<span class="fc" id="L47">                writer.close();</span>
<span class="pc" id="L48">            } catch(IOException e){}</span>
<span class="fc" id="L49">        }</span>

        public ArrayList&lt;Integer&gt; drawPebble(){
<span class="fc" id="L52">            MyBag [] bags = {X, Y, Z};</span>
<span class="fc" id="L53">            Random random = new Random();</span>
<span class="fc" id="L54">            int select = random.nextInt(bags.length);</span>
<span class="fc" id="L55">            lastBag = bags[select];</span>
<span class="fc" id="L56">            return bags[select].draw10();</span>
        }

        public boolean is100(){
<span class="fc" id="L60">            int sum = 0;</span>
<span class="fc bfc" id="L61" title="All 2 branches covered.">            for(int i=0; i&lt;10; i++){</span>
<span class="fc" id="L62">                sum += myHand.get(i);</span>
            }
<span class="fc bfc" id="L64" title="All 2 branches covered.">            return sum == 100;</span>
        }

        public int discard(){
<span class="fc" id="L68">            int peb = myHand.remove(0);</span>
<span class="fc" id="L69">            lastBag.corrospondingBag.myPebbles.add(peb);</span>
<span class="fc" id="L70">            return peb;</span>
        }

        public int draw() {
<span class="fc" id="L74">            MyBag [] bags = {X, Y, Z};</span>
<span class="fc" id="L75">            Random random = new Random();</span>
<span class="fc" id="L76">            int select = random.nextInt(bags.length);</span>
<span class="fc" id="L77">            lastBag = bags[select];</span>
<span class="fc" id="L78">            return bags[select].drawOne();</span>
        }
    }

    static MyBag X;
    static MyBag Y;
    static MyBag Z;

<span class="fc" id="L86">    static boolean done = false;</span>

<span class="fc" id="L88">    static MyBag A = new MyBag(&quot;A&quot;);</span>
<span class="fc" id="L89">    static MyBag B = new MyBag(&quot;B&quot;);</span>
<span class="fc" id="L90">    static MyBag C = new MyBag(&quot;C&quot;);</span>
    
    public static void doWork(Scanner input) {
<span class="fc" id="L93">        System.out.println(&quot;Welcome to the PebbleGame! \n You will be asked to enter the number of players. \n and then for the location of three files in turn containing comma seperated integer values for the pebble weights. \n The integer values must be strictly positive. \n The game will then be simulated, and output written to files in this directory. \n&quot;);</span>

<span class="fc" id="L95">        int number=0;</span>
<span class="fc" id="L96">        boolean playerCheck=false;</span>

<span class="fc bfc" id="L98" title="All 2 branches covered.">        while (!playerCheck){</span>
<span class="fc" id="L99">            System.out.println(&quot;Enter the number of players: &quot;);</span>
<span class="fc" id="L100">            number = Integer.parseInt(input.next());</span>
<span class="fc bfc" id="L101" title="All 2 branches covered.">            if (number &gt;=1){</span>
<span class="fc" id="L102">                playerCheck = true;</span>
            } else {
<span class="fc" id="L104">                System.out.println(&quot;Invalid player entry!&quot;);</span>
            }
        }
<span class="fc" id="L107">        Player[] players = new Player[number];</span>

<span class="fc bfc" id="L109" title="All 2 branches covered.">        for(int i=0 ; i&lt;number ;i++){</span>
<span class="fc" id="L110">            players[i] = new Player(&quot;player&quot; + (i+1));</span>
        }

<span class="fc" id="L113">        boolean fileCheck=false;</span>
<span class="fc" id="L114">        int check = 11*number;</span>

<span class="fc bfc" id="L116" title="All 2 branches covered.">        while (!fileCheck){</span>
            try{
<span class="fc" id="L118">                System.out.println(&quot;Enter File 1: &quot;);</span>
<span class="fc" id="L119">                X = new MyBag(input.next(), &quot;X&quot;);</span>
<span class="fc" id="L120">                X.checkMin(check);</span>

<span class="fc" id="L122">                System.out.println(&quot;Enter File 2: &quot;);</span>
<span class="fc" id="L123">                Y = new MyBag(input.next(), &quot;Y&quot;);</span>
<span class="fc" id="L124">                Y.checkMin(check);</span>

<span class="fc" id="L126">                System.out.println(&quot;Enter File 3: &quot;);</span>
<span class="fc" id="L127">                Z = new MyBag(input.next(), &quot;Z&quot;);</span>
<span class="fc" id="L128">                Z.checkMin(check);</span>

<span class="fc" id="L130">                fileCheck = true;</span>
<span class="fc" id="L131">            }catch (IOException e){</span>
<span class="fc" id="L132">                System.out.println(e);</span>
<span class="fc" id="L133">            }</span>
        }
<span class="fc" id="L135">        X.setCoBag(A);</span>
<span class="fc" id="L136">        Y.setCoBag(B);</span>
<span class="fc" id="L137">        Z.setCoBag(C);</span>

<span class="fc" id="L139">        A.setCoBag(X);</span>
<span class="fc" id="L140">        B.setCoBag(Y);</span>
<span class="fc" id="L141">        C.setCoBag(Z);</span>

<span class="fc bfc" id="L143" title="All 2 branches covered.">        for(int i=0 ; i&lt;number ;i++){</span>
<span class="fc" id="L144">            players[i].start();</span>
        }

<span class="fc" id="L147">        input.close();</span>
<span class="fc" id="L148">    }</span>

    public static void main (String args[]){
<span class="nc" id="L151">        doWork(new Scanner(System.in));</span>
<span class="nc" id="L152">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>